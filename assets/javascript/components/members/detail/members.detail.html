<a class="btn btn-default pull-right" ui-sref="members.edit({id: member.id})">Redigera</a>
<h1>{{member.first_name}} {{member.last_name}}</h1>

<div class="row">
  <div class="col-md-6">
    <h2>Inbetalningar</h2>
    <table class="table table-bordered table-hover table-condensed">
      <tr>
        <th>Id</th>
        <th>Datum</th>
        <th>Summa</th>
        <th>Betalningsmetod</th>
        <th>Registrerad av</th>
        <th>Ändra</th>
      </tr>
      <tr ng-repeat="payment in member.payments">
        <td>{{payment.id}}</td>
        <td>
          <span editable-date="payment.payment_date" e-name="payment_date" e-form="rowform" e-required>
            {{ payment.payment_date }}
          </span>
        </td>
        <td>
          <span editable-number="payment.amount" e-name="amount" e-form="rowform" e-required>
            {{payment.amount}}
          </span>
        </td>
        <td>
            <span editable-select="payment.payment_method_id" e-name="payment_method_id" onshow="loadPaymentMethods()" e-form="rowform" e-ng-options="p.id as p.name for p in paymentMethods">
              {{payment.payment_method.name}}
            </span>
        </td>
        <td>
          <a ui-sref="members.detail({id: payment.created_by.id})">{{payment.created_by.first_name}} {{payment.created_by.last_name}}</a>
        </td>
        <td>
          <form editable-form name="rowform" onbeforesave="savePayment($data, member.id)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="insertedPayment == payment">
            <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
              save
            </button>
            <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
              cancel
            </button>
          </form>
          <div class="buttons" ng-show="!rowform.$visible">
            <button class="btn btn-primary" ng-click="rowform.$show()">edit</button>
            <button class="btn btn-danger" ng-click="removeMember($index)">del</button>
          </div> 
        </td>
      </tr>
    </table>
    <p><a class="btn btn-success" ng-click="sendPaymentReminder()">Påminn medlem om betalning</a></p>
    <p><a class="btn btn-success" ng-click="addPayment()">Lägg till betalning</a></p>
  </div>
  <div class="col-md-6">
    <h2>Skickade påminnelser om förnyat medlemskap</h2>
    <table class="table table-bordered table-hover table-condensed">
      <tr>
        <th>Id</th>
        <th>Metod</th>
        <th>Skickad</th>
      </tr>
      <tr ng-repeat="reminder in paymentReminders">
        <td>{{reminder.id}}</td>
        <td>{{reminder.method}}</td>
        <td>{{reminder.created_at}}</td>
      </tr>
    </table>
  </div>
</div>
